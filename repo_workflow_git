#!/bin/bash
# =============================================
# Crypto Repo One-Click Workflow
# Place this file named "g" (no extension) inside your Cryptography folder
# Double-click it or run ./g in Git Bash â†’ does everything safely
# =============================================

echo "ğŸš€ Crypto Repo Workflow Starting..."

# 1. Always pull latest first
echo "ğŸ“¥ Pulling latest changes..."
git pull || { echo "âŒ Pull failed"; exit 1; }

# 2. Ask for commit message
read -p "ğŸ“ Enter commit message (or press Enter to open editor): " message

if [ -z "$message" ]; then
    git commit -a   # opens editor (VS Code if configured)
else
    git commit -a -m "$message"
fi

# 3. Pull again just in case someone pushed in the last few minutes
echo "ğŸ”„ Final pull (safety check)..."
git pull --no-rebase || { 
    echo "âš ï¸  Merge conflict detected! Fix manually then run git push"
    exit 1
}

# 4. Push
echo "ğŸ“¤ Pushing to GitHub..."
git push || { echo "âŒ Push failed"; exit 1; }

echo "ğŸ‰ All done! Your repo is now perfectly in sync."
read -p "Press Enter to close..."